<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Write It Down</title>
</head>
<body>
<div>
  <h1>Note Editor</h1>
  <hr>
  <a th:href="@{/showAddCategoryForm}"> Add Category </a>

  <form action="#" th:action="@{/saveEvent}" th:object="${event}" method="POST">

    <input type="hidden" th:field="*{eventId}" />

    <label for="title"></label>
    <input type="text" id="title" th:field="*{eventTitle}">

    <label for="description"></label>
    <input type="text" id="description" th:field="*{eventDescription}">

    <input type="hidden" name="eventDate" th:value="${T(java.time.LocalDate).now()}">
    <input type="hidden" id="eventTime" name="eventTime">

    <!--    LocalTime.now() tuotti ongelmia, joten tein ajan generoimisen javascriptillÃ¤
    -->
    <script th:inline="javascript">
      var currentTime = new Date();

      // Formatoidaan aika muotoon "HH:mm:ss"
      var formattedTime = currentTime.toTimeString().slice(0, 8);
      document.getElementById('eventTime').value = formattedTime;
    </script>

    <label for="dueDate">Due To:</label>
    <input type="date" id="dueDate" th:field="*{dueDate}">

    <label for="categoryName">Select a category:</label>
    <select id="categoryName" name="categoryName">
      <option value="">Nothing selected</option>
      <option th:each="category : ${allCategories}"
              th:text="${category.categoryName}"
              th:value="${category.categoryName}">
      </option>
    </select>

    <button type="submit"> Save Note</button>
  </form>

  <hr>

  <a th:href="@{/}"> Back to Notes</a>
</div>
</body>

</html>